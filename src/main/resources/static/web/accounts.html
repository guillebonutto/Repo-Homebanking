<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Your accounts</title>
		<link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
		<link rel="stylesheet" href="../styles/style.css" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>
		<link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet" type="text/css" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
		/>
	</head>

	<body id="body1">
		<div id="app">
			<div class="div-form" v-show="showModal == true">
				<form
					action=""
					class="animate__animated animate__zoomInDown"
					@submit="disableDefault()"
					v-show="loadingPage == false"
				>
					<box-icon name="x-circle" @click="showModal = false"></box-icon>
					<h3 class="mb-3"><b>Select Account type</b></h3>
					<select class="mb-4" v-model="type">
						<option>Select</option>
						<option value="SAVING_ACCOUNT">Saving Account</option>
						<option value="CHECKING_ACCOUNT">Checking Account</option>
						<option value="DOLLARS_ACCOUNT">Dollars Account</option>
					</select>
					<button class="p-2" @click="addAccount">Create</button>
				</form>
			</div>
			<div class="div-spinner" v-show="loadingPage == true">
				<div class="d-flex flex-column align-items-center">
					<div class="spinner" v-show="loadingPage"></div>
					<p class="mt-2">Loading</p>
				</div>
			</div>
			<header>
				<div id="sidemenu" :class="collap + ' animate__animated animate__fadeInLeftBig'">
					<div class="btn-menu" @click="check"></div>
					<div class="cont-menu">
						<div class="pt-3 d-flex flex-column align-items-center" id="titulo">
							<img src="../images/images-removebg-preview.png" alt="logo" id="logo" width="40rem" />
							<h1>Ecobank</h1>
						</div>
						<div class="cont-client">
							<img src="" id="photo" alt="photo" />
						</div>
						<div id="profile">
							<ul class="d-flex flex-column align-items-center">
								<li>
									<b><u>{{clients.firstName}} {{clients.lastName}}</u></b>
								</li>
								<li>{{clients.email}}</li>
							</ul>
						</div>
						<nav class="navbar-cuentas">
							<a href="accounts.html">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="icon icon-tabler icon-tabler-list-numbers"
									width="20"
									height="20"
									viewBox="0 0 24 24"
									stroke-width="1.5"
									stroke="#e2f5ff"
									fill="none"
									stroke-linecap="round"
									stroke-linejoin="round"
								>
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<path d="M11 6h9" />
									<path d="M11 12h9" />
									<path d="M12 18h8" />
									<path d="M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4" />
									<path d="M6 10v-6l-2 2" />
								</svg>
								<b>Accounts</b>
							</a>
							<a href="cards.html">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="icon icon-tabler icon-tabler-credit-card"
									width="20"
									height="20"
									viewBox="0 0 24 24"
									stroke-width="1.5"
									stroke="#e2f5ff"
									fill="none"
									stroke-linecap="round"
									stroke-linejoin="round"
								>
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<rect x="3" y="5" width="18" height="14" rx="3" />
									<line x1="3" y1="10" x2="21" y2="10" />
									<line x1="7" y1="15" x2="7.01" y2="15" />
									<line x1="11" y1="15" x2="13" y2="15" />
								</svg>
								Cards
							</a>
							<a href="transfers.html">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="icon icon-tabler icon-tabler-help"
									width="20"
									height="20"
									viewBox="0 0 24 24"
									stroke-width="1.5"
									stroke="#e2f5ff"
									fill="none"
									stroke-linecap="round"
									stroke-linejoin="round"
								>
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<circle cx="12" cy="12" r="9" />
									<line x1="12" y1="17" x2="12" y2="17.01" />
									<path d="M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" />
								</svg>
								Transfers
							</a>
							<a href="buy-sell.html">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="icon icon-tabler icon-tabler-currency-dollar"
									width="20"
									height="20"
									viewBox="0 0 24 24"
									stroke-width="1.5"
									stroke="#e2f5ff"
									fill="none"
									stroke-linecap="round"
									stroke-linejoin="round"
								>
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<path
										d="M16.7 8a3 3 0 0 0 -2.7 -2h-4a3 3 0 0 0 0 6h4a3 3 0 0 1 0 6h-4a3 3 0 0 1 -2.7 -2"
									/>
									<path d="M12 3v3m0 12v3" />
								</svg>
								Buy-sell Dollars
							</a>
							<a @click="redirectIfExist('agree&conditions')">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="icon icon-tabler icon-tabler-user-check"
									width="20"
									height="20"
									viewBox="0 0 24 24"
									stroke-width="1.5"
									stroke="#e2f5ff"
									fill="none"
									stroke-linecap="round"
									stroke-linejoin="round"
								>
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<circle cx="9" cy="7" r="4" />
									<path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
									<path d="M16 11l2 2l4 -4" />
								</svg>
								Agree and conditions
							</a>
							<a class="ayuda" @click="redirectIfExist('help')">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									class="icon icon-tabler icon-tabler-help"
									width="20"
									height="20"
									viewBox="0 0 24 24"
									stroke-width="1.5"
									stroke="#e2f5ff"
									fill="none"
									stroke-linecap="round"
									stroke-linejoin="round"
								>
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<circle cx="12" cy="12" r="9" />
									<line x1="12" y1="17" x2="12" y2="17.01" />
									<path d="M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4" />
								</svg>
								Help
							</a>
						</nav>
						<a class="cerrar-sesion" @click="signOut()">
							<i class="fa-solid fa-arrow-right-from-bracket"></i>Sign out</a
						>
						<div class="equis" @click="check()">
							<svg
								xmlns="http://www.w3.org/2000/svg"
								class="icon icon-tabler icon-tabler-x"
								width="24"
								height="24"
								viewBox="0 0 24 24"
								stroke-width="1.5"
								stroke="#ffffff"
								fill="none"
								stroke-linecap="round"
								stroke-linejoin="round"
							>
								<path stroke="none" d="M0 0h24v24H0z" fill="none" />
								<line x1="18" y1="6" x2="6" y2="18" />
								<line x1="6" y1="6" x2="18" y2="18" />
							</svg>
						</div>
					</div>
				</div>
			</header>
			<main class="mb-5">
				<div class="d-flex justify-content-end align-items-center mt-2 me-3 form-check form-switch">
					<input
						class="form-check-input"
						type="checkbox"
						role="switch"
						v-model="nightmode"
						@change="chequeo"
					/>
					<p class="ms-2 mb-0" id="noche">
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="icon icon-tabler icon-tabler-moon-stars"
							width="20"
							height="20"
							viewBox="0 0 24 24"
							stroke-width="1.5"
							stroke="#0d265e"
							fill="none"
							stroke-linecap="round"
							stroke-linejoin="round"
						>
							<path stroke="none" d="M0 0h24v24H0z" fill="none" />
							<path
								d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"
							/>
							<path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2" />
							<path d="M19 11h2m-1 -1v2" />
						</svg>
					</p>
				</div>
				<ul class="nav nav-tabs ms-0 mb-3" id="pestania">
					<li class="nav-item">
						<a class="nav-link active" href="">Accounts</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#">Transactions</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="cards.html">Cards</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="postnet.html">Postnet</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="help.html">Help</a>
					</li>
				</ul>
				<div id="div-principal" class="ms-4 texto animate__animated animate__bounceInDown">
					<section>
						<div class="add d-flex align-items-center">
							<h2 class="me-3">Accounts</h2>
							<div v-if="filterStatus.length < 3" @click="loadingPage == false">
								<svg
									aria-hidden="true"
									focusable="false"
									data-prefix="far"
									data-icon="plus-circle"
									role="img"
									xmlns="http://www.w3.org/2000/svg"
									viewBox="0 0 512 512"
									class="svg-inline--fa fa-plus-circle fa-w-16 fa-2x"
									@click="showModal = true"
								>
									<path
										fill="currentColor"
										d="M384 240v32c0 6.6-5.4 12-12 12h-88v88c0 6.6-5.4 12-12 12h-32c-6.6 0-12-5.4-12-12v-88h-88c-6.6 0-12-5.4-12-12v-32c0-6.6 5.4-12 12-12h88v-88c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v88h88c6.6 0 12 5.4 12 12zm120 16c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-48 0c0-110.5-89.5-200-200-200S56 145.5 56 256s89.5 200 200 200 200-89.5 200-200z"
										class=""
									></path>
								</svg>
							</div>
						</div>
						<div
							class="me-4 mb-3 card-body rounded shadow d-flex flex-column align-items-center justify-content-center"
							v-if="mobile"
						>
							<h3><b>TOTAL BALANCE</b></h3>
							<h4>${{totalBalance}}</h4>
						</div>
						<div class="mt-4 container d-flex flex-wrap">
							<div
								class="mb-3 me-4 card-body rounded shadow"
								v-for="person in accounts"
								v-show="person.deleted == false"
							>
								<div class="card-header d-flex justify-content-center">
									<h3>
										<b>
											{{person.type.substring(0,1)}}{{person.type.substring(1,person.type.indexOf('_')).toLowerCase()}}
											{{person.type.substring(person.type.indexOf('_')+1,person.type.indexOf('_')+2).toUpperCase()}}{{person.type.substring(person.type.indexOf('_')+2).toLowerCase()}}
										</b>
									</h3>
								</div>
								<h5 class="card-text pt-3 pb-2">Account N°: {{person.number}}</h5>
								<div class="ms-2">
									<p class="card-text">
										Date and Time: {{person.creationDate.substring(0,10)}}
										{{person.creationDate.substring(11,16)}}
									</p>
									<p class="mb-3 card-text">Transactions: {{person.transactions.length}}</p>
								</div>
								<div class="ms-2 me-2 d-flex justify-content-between">
									<div class="d-flex ms-1">
										<button class="p-2" @click="link(person)"><b>See Transactions</b></button>
										<button class="p-2 ms-2 deleteCard" @click="hiddeAccount(person.id)">
											Delete account
										</button>
									</div>
									<div class="balance d-flex align-items-end">
										<svg
											xmlns="http://www.w3.org/2000/svg"
											class="icon icon-tabler icon-tabler-coin"
											width="24"
											height="24"
											viewBox="0 0 24 24"
											stroke-width="1.5"
											stroke="#9bb96e"
											fill="none"
											stroke-linecap="round"
											stroke-linejoin="round"
										>
											<path stroke="none" d="M0 0h24v24H0z" fill="none" />
											<circle cx="12" cy="12" r="9" />
											<path
												d="M14.8 9a2 2 0 0 0 -1.8 -1h-2a2 2 0 0 0 0 4h2a2 2 0 0 1 0 4h-2a2 2 0 0 1 -1.8 -1"
											/>
											<path d="M12 6v2m0 8v2" />
										</svg>
										<p class="mb-0">{{person.balance.toFixed(2)}}</p>
									</div>
								</div>
							</div>
							<div
								class="me-4 mb-3 card-body rounded shadow d-flex flex-column align-items-center justify-content-center"
								v-if="!mobile"
							>
								<h3><b>TOTAL BALANCE</b></h3>
								<h4>${{totalBalance.toFixed(2)}}</h4>
							</div>
						</div>
					</section>
					<section v-if="loans.length > 0">
						<div class="mt-5 mb-2 loanstitle border-top border-3">
							<div class="mt-5 d-flex">
								<h2 class="mb-0 me-3">Loans</h2>
								<a href="/web/loan-application.html" class="d-flex align-items-center"
									><b>Apply for loans</b></a
								>
							</div>
						</div>
						<div class="container d-flex flex-wrap mt-3">
							<div class="me-4 card-body rounded shadow" v-for="loan in loans" style="z-index: 1">
								<h5 class="card-title pb-4">{{loan.name}}</h5>
								<p class="card-title">Amount: {{loan.amount}}</p>
								<p class="card-title">Payments: {{loan.payments}}</p>
								<p class="card-title">Monthly fee: {{loan.monthlyFee.toFixed(2)}}</p>
							</div>
						</div>
					</section>
					<section v-else>
						<h2 class="mt-5 mb-4 border-top border-3">Loans</h2>
						<div
							class="container me-4 d-flex justify-content-center align-items-center card-body rounded shadow"
						>
							<h5 class="m-5 card-title">
								You do not have loans at the moment
								<a href="/web/loan-application.html" class="d-flex align-items-center"
									><b>Apply for loans</b></a
								>
							</h5>
						</div>
					</section>
				</div>
			</main>
		</div>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
			crossorigin="anonymous"
		></script>
		<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"></script>
		<script src="https://unpkg.com/boxicons@2.1.1/dist/boxicons.js"></script>
		<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
		<script src="../lib/accounts.js"></script>
		<footer class="p-4 d-flex footer justify-content-between align-items-center">
			<div class="col-5">
				<p>EcoBank</p>
				<p>Copyright ® 2022 . Al rights reserved</p>
			</div>
			<div class="col-5 d-flex justify-content-end justify-content-evenly redes">
				<a href="mailto:admin@hotmail.com">
					<i class="far fa-envelope fa-2x"></i>
				</a>
				<a href="http://www.facebook.com" target="_blank">
					<i class="fab fa-facebook-square fa-2x"></i>
				</a>
				<a href="http://www.twitter.com" target="_blank">
					<i class="fab fa-twitter fa-2x"></i>
				</a>
				<a href="http://www.instagram.com" target="_blank">
					<i class="fab fa-instagram fa-2x"></i>
				</a>
			</div>
		</footer>
	</body>
</html>
